// Master Module: Scale & Optimize
// Level: Expert
// Prerequisite: Complete Specialist module

export const masterModule = {
  id: 'master',
  slug: 'master',
  title: 'Master',
  subtitle: 'Scale & Optimize',
  description: 'Advanced techniques for consistent profits',
  icon: 'ðŸ‘‘',
  difficulty: 'expert',
  lessonCount: 5,
  lessons: [
    {
      id: 'portfolio-construction',
      slug: 'portfolio-construction',
      title: 'Portfolio Construction',
      description: 'Building a balanced portfolio for different market conditions',
      difficulty: 'expert',
      readTime: 8,
      content: `# Portfolio Construction

Individual trades matter less than how they fit together. A well-constructed portfolio survives drawdowns, captures upside, and compounds over time. This is how professionals think about their money.

## Why Portfolio Construction Matters

**Trader mindset:** "Is this trade good?"
**Portfolio mindset:** "How does this trade fit with everything else?"

A collection of good trades can still be a bad portfolio if they're all correlated.

**Example:**
- 5 "great" AI narrative tokens
- AI narrative collapses
- All 5 dump simultaneously
- Portfolio destroyed

Individual trades were "good." Portfolio construction was terrible.

## Portfolio Tiers

Structure your portfolio in tiers based on risk and conviction:

### Tier 1: Foundation (40-60% of portfolio)

**What belongs here:**
- Blue chips: SOL, ETH, BTC
- Stablecoins for dry powder
- Highest conviction, longest-term holds

**Characteristics:**
- Lowest risk tier
- Rarely traded
- Core of your wealth
- Survives any market

### Tier 2: Core Holdings (20-35% of portfolio)

**What belongs here:**
- Established altcoins
- Proven protocols
- Medium-term conviction plays

**Characteristics:**
- Moderate risk
- Traded occasionally
- Months-long holding periods
- Quality over speculation

### Tier 3: Active Trading (15-25% of portfolio)

**What belongs here:**
- Swing trades
- Narrative plays
- Higher-risk opportunities

**Characteristics:**
- Higher risk
- Actively managed
- Days to weeks holding
- Where most "trading" happens

### Tier 4: Speculation (5-15% of portfolio)

**What belongs here:**
- New memecoins
- High-risk/high-reward plays
- "Lottery tickets"

**Characteristics:**
- Highest risk
- Can go to zero
- Short holding periods
- Small sizes only

## Allocation by Risk Tolerance

**Conservative:**
- Foundation: 60%
- Core: 25%
- Trading: 10%
- Speculation: 5%

**Moderate:**
- Foundation: 50%
- Core: 25%
- Trading: 15%
- Speculation: 10%

**Aggressive:**
- Foundation: 40%
- Core: 20%
- Trading: 25%
- Speculation: 15%

**Never go below 40% Foundation.** This is your survival layer.

## Correlation Awareness

**Correlation = How assets move together**

**High correlation:** Both go up and down together
**Low correlation:** Move independently
**Negative correlation:** Move opposite

**Portfolio goal:** Mix of correlations so everything doesn't dump at once.

### Correlation in Crypto

**Highly correlated:**
- All memecoins (dump together in risk-off)
- All AI tokens (narrative-linked)
- All Solana tokens (chain-linked)
- Most altcoins to BTC (market-linked)

**Lower correlation:**
- Stablecoins vs everything
- Sometimes BTC vs altcoins
- Different narratives (AI vs gaming vs DeFi)

**Practical application:**
- Don't hold 10 memecoins (all correlated)
- Mix narratives if holding multiple plays
- Always have stables/BTC for dry powder
- Recognize when "diversified" isn't actually diversified

## Rebalancing

Over time, allocations drift.

**Example:**
- Started: 50% Foundation, 25% Trading, 25% Speculation
- After big memecoin win: 30% Foundation, 20% Trading, 50% Speculation
- Now overexposed to speculation

**Rebalancing rules:**
- Check allocations weekly
- If any tier drifts 10%+ from target, rebalance
- Take profits from winners into lower tiers
- Maintain your target allocation

**How to rebalance:**
- Sell from overweight tiers
- Buy into underweight tiers
- Or simply direct new capital to underweight tiers

## Cash Management

**Cash (stablecoins) is a position.**

**Benefits of holding cash:**
- Dry powder for opportunities
- Reduces portfolio volatility
- Psychological comfort
- Optionality

**How much cash:**
- Minimum: 10% always
- During uncertainty: 20-30%
- After big wins: Take some to cash
- Before expected volatility: Increase cash

**Cash is not "doing nothing."** Cash is waiting for better opportunities.

## Position Limits

**Maximum single position sizes:**

- Foundation assets (BTC, ETH, SOL): Up to 30% each
- Core holdings: Maximum 10% each
- Trading positions: Maximum 5% each
- Speculation: Maximum 2% each

**Why limits matter:**
- No single position can destroy you
- Forces diversification
- Prevents overconcentration from winners

## Portfolio Review Cadence

**Daily (2 minutes):**
- Quick P&L check
- Any positions needing attention?

**Weekly (15 minutes):**
- Allocation check
- Rebalancing needed?
- Position sizes appropriate?

**Monthly (1 hour):**
- Full portfolio review
- Performance by tier
- Correlation assessment
- Strategic adjustments`
    },
    {
      id: 'scaling-positions',
      slug: 'scaling-positions',
      title: 'Scaling Positions',
      description: 'How to size up without blowing up',
      difficulty: 'expert',
      readTime: 8,
      content: `# Scaling Positions

You've been consistently profitable. Account is growing. Now what? Scaling up is where many traders fail. The same approach that worked small can destroy you when large.

## The Scaling Challenge

**What changes when you scale:**
- Slippage increases
- Market impact matters
- Emotions intensify
- Mistakes cost more
- Liquidity constraints appear

**What must stay the same:**
- Risk percentage per trade
- Process and system
- Emotional discipline
- Position sizing rules

## When to Scale

**Scale when:**
- Consistent profitability (3+ months)
- System is proven (50+ trades)
- Emotions are managed
- Process is solid
- You can afford to lose more

**Don't scale when:**
- On a winning streak (overconfidence)
- Trying to "make up" for losses
- System isn't proven yet
- Emotions are unstable
- Life circumstances changed

## How to Scale Gradually

**The 25% Rule:**
Increase position sizes by maximum 25% at a time.

**Example progression:**
- Start: $500 per trade
- Scale 1: $625 per trade
- Scale 2: $780 per trade
- Scale 3: $975 per trade
- Scale 4: $1,220 per trade

**Between each scale:**
- Minimum 20 trades at new size
- Verify profitability maintained
- Check emotional stability
- Only proceed if all systems go

## The Two-Step Scale Test

Before each size increase:

**Step 1: Paper trade at new size**
- Track 10+ trades at new size (on paper)
- Would you have managed them correctly?
- Any emotional issues with new size?

**Step 2: Live trade half the increase**
- Target size: $1,000
- Current size: $500
- First increase to: $750 (not full $1,000)
- Validate before going to $1,000

## Liquidity Constraints

As you scale, liquidity becomes a factor.

**Liquidity problems:**
- Your order moves the price (market impact)
- Can't exit quickly when needed
- Slippage eats your profits

**Liquidity rules:**
- Never be more than 1-2% of daily volume
- Check depth before sizing large positions
- Accept that some opportunities won't scale
- Factor slippage into profit calculations

**Example:**
- Token has $500K daily volume
- Maximum position: $5-10K (1-2%)
- If you want $50K position, this token won't work

## Scaling by Asset Type

Different assets scale differently:

**Blue chips (BTC, ETH, SOL):**
- Highly liquid
- Large positions possible
- Minimal market impact
- Scale freely

**Mid-cap altcoins:**
- Moderate liquidity
- Check depth before scaling
- Some market impact at size
- Scale carefully

**Memecoins / Small caps:**
- Low liquidity
- Significant market impact
- Hard to exit large positions
- Often can't scale much

**The paradox:** The assets with highest returns often can't handle large positions.

## Psychological Scaling

Money means different things at different sizes.

**$100 loss feels like:** Coffee money
**$1,000 loss feels like:** A nice dinner
**$10,000 loss feels like:** A vacation
**$100,000 loss feels like:** A car

**As sizes increase:**
- Losses feel more painful
- Decisions feel more important
- Emotions intensify
- Sleep can be affected

**Managing psychological scaling:**
- Scale slowly to acclimate
- Keep position sizing consistent (% based)
- Remember: 1% is still 1% regardless of account size
- Take breaks if stress increases

## The Risk of Scaling Too Fast

**What happens:**
1. Trader has success at small size
2. Gets confident, scales up quickly
3. First loss at new size is psychologically devastating
4. Tilts, abandons process
5. Larger losses follow
6. Account blown

**The fix:**
- Scale gradually (25% max increase)
- Expect losses at new sizes (they will come)
- Prepare mentally for larger dollar losses
- Have a scale-down plan if needed

## Scaling Down

Sometimes you need to reduce size:

**Scale down when:**
- Drawing down significantly
- Emotional state degraded
- System underperforming
- Life stress increased
- Lost confidence

**How to scale down:**
- Reduce to previous comfortable size
- Or reduce by 50%
- Trade at reduced size until stable
- Rebuild confidence before scaling up again

**No shame in scaling down.** It's smart risk management.

## The Scaling Journal

Track your scaling journey:

\`\`\`
SCALING LOG

Current base size: $____
Date scaled to this: ____
Trades at this size: ____
Win rate at this size: ____%
Emotional comfort (1-10): ____

Next target size: $____
Criteria to scale:
- [ ] 20+ trades at current size
- [ ] Profitable at current size
- [ ] Emotionally stable
- [ ] Process followed consistently
\`\`\``
    },
    {
      id: 'advanced-entry-exit',
      slug: 'advanced-entry-exit',
      title: 'Advanced Entry and Exit Techniques',
      description: 'Sophisticated methods for better execution',
      difficulty: 'expert',
      readTime: 8,
      content: `# Advanced Entry and Exit Techniques

You know the basics. Now learn the advanced techniques that professional traders use to optimize entries, exits, and everything in between.

## Advanced Entry Techniques

### Technique 1: Iceberg Orders

**What it is:** Breaking large orders into smaller pieces to hide true size.

**How it works:**
- Want to buy $10,000
- Instead of one $10K order (shows your hand)
- Place 10 Ã— $1,000 orders over time
- Market doesn't see your full size

**When to use:**
- Larger positions
- Less liquid tokens
- When you don't want to move price
- Accumulating a position

**Execution:**
- Manual: Place orders in chunks
- Automated: TWAP (Time-Weighted Average Price) orders if available

### Technique 2: Scaling Into Positions

**What it is:** Building position across multiple entries.

**Methods:**

**Planned scaling:**
\`\`\`
Entry 1: $1.00 - Buy 40%
Entry 2: $0.90 - Buy 30%
Entry 3: $0.80 - Buy 30%
\`\`\`
Average entry improves if it dips. Partial position if it doesn't.

**Confirmation scaling:**
- Entry 1: Initial position on first signal
- Entry 2: Add when thesis confirmed
- Entry 3: Add on breakout/momentum

**Advantages:**
- Better average price if it dips
- Don't miss move entirely if it runs
- Psychological ease (not all-in at once)

### Technique 3: Level-Based Entries

**What it is:** Using specific technical levels for precise entries.

**Key levels:**
- Previous support/resistance
- VWAP
- Key moving averages (20/50/200)
- Fibonacci retracement levels
- Round numbers

**How to use:**
- Identify key levels before trading
- Set limit orders at these levels
- Only enter when price reaches your level
- No chasing

### Technique 4: Time-Based Entries

**What it is:** Entering based on time patterns.

**Common patterns:**
- Avoid first 30 minutes (volatile, erratic)
- Look for setups at session opens
- End of day often sees reversals
- Weekends can have low liquidity

**Application:**
- Define your preferred trading times
- Avoid times with poor execution
- Match time to your strategy

## Advanced Exit Techniques

### Technique 1: Scaled Exits

**What it is:** Selling in portions at multiple targets.

**Example:**
\`\`\`
Target 1 (2R): Sell 33% - Lock in profit
Target 2 (4R): Sell 33% - More profit
Target 3 (Trail): Remaining 34% - Let it run
\`\`\`

**Advantages:**
- Locks in profit while maintaining upside
- Reduces regret (some sold, some running)
- Better average exit than all-or-nothing

### Technique 2: Trailing Exits

**What it is:** Moving exit point as price moves in your favor.

**Methods:**

**Percentage trail:**
- Exit if price drops X% from peak
- Example: Trail 15% below high

**Technical trail:**
- Exit if price closes below 20 EMA
- Exit if price breaks structure

**ATR trail:**
- Exit if price drops 2Ã— ATR from peak
- Adjusts to volatility automatically

**Execution:**
- Manual: Watch and adjust
- Orders: Some platforms support trailing stops

### Technique 3: Time-Based Exits

**What it is:** Exiting based on time, not price.

**Examples:**
- Exit after 5 days regardless of price
- Exit before major news/events
- Exit at end of week

**When useful:**
- Catalyst trades (exit after catalyst)
- Avoiding weekend risk
- Freeing capital for other opportunities
- When trade isn't working but not stopped

### Technique 4: Condition-Based Exits

**What it is:** Exiting when conditions change, not just price.

**Examples:**
- Exit if narrative dies (regardless of price)
- Exit if dev starts selling
- Exit if thesis invalidated
- Exit if better opportunity appears

**Requires:**
- Continuous monitoring
- Clear thesis to invalidate
- Discipline to act on conditions

## Combining Techniques

**Professional approach:**

**Entry:**
- Scale into position (40/30/30)
- At key technical levels
- During favorable time windows

**Exit:**
- First target: Sell 33% (lock profit)
- Second target: Sell 33% (more profit)
- Trail remainder with technical stop
- Override all: Exit if thesis breaks

## Order Flow Reading

**What it is:** Reading buying/selling pressure in real-time.

**What to watch:**
- Bid/ask size ratios
- Large orders appearing/disappearing
- Trades hitting bid vs ask
- Order book depth changes

**Signals:**
- Large bids stacking: Buying pressure
- Large asks stacking: Selling pressure
- Bids being pulled: Weakness
- Asks being eaten: Strength

**Application:**
- Time entries with order flow
- Confirm breakouts with flow
- Spot absorption (large orders being filled)

## Execution Quality Tracking

Track your execution:

\`\`\`
EXECUTION LOG

Trade #: ____
Planned entry: $____
Actual entry: $____
Entry slippage: ____%

Planned exit: $____
Actual exit: $____
Exit slippage: ____%

Total execution cost: ____%
Notes: ____
\`\`\`

**Monthly review:**
- Average slippage
- Best/worst executions
- Patterns to improve`
    },
    {
      id: 'tax-record-keeping',
      slug: 'tax-record-keeping',
      title: 'Tax and Record Keeping',
      description: 'Protecting your profits from unnecessary losses',
      difficulty: 'expert',
      readTime: 7,
      content: `# Tax and Record Keeping

Making money is step one. Keeping it is step two. Poor record keeping and tax planning can cost you significant portions of your gains. This lesson covers the essentials.

## Why This Matters

**Common scenario:**
- Trader makes $100K in gains
- Doesn't track properly
- Owes $40K in taxes
- Already spent the money
- Financial disaster

**With proper planning:**
- Same $100K in gains
- Tax liability calculated ongoing
- Money set aside
- Tax-efficient strategies used
- Keep more of your gains

## Record Keeping Fundamentals

### What to Track

**For every trade:**
- Date and time
- Asset bought/sold
- Quantity
- Price per unit
- Total value
- Fees paid
- Wallet/exchange used

**Additional helpful data:**
- Trade thesis/reason
- P&L (realized)
- Holding period

### Tracking Methods

**Option 1: Spreadsheet**
- Manual entry
- Full control
- Time-consuming
- Works for low volume

**Option 2: Crypto tax software**
- Koinly, CoinTracker, TokenTax, etc.
- Imports transactions automatically
- Calculates gains/losses
- Generates tax reports
- Recommended for active traders

**Option 3: Exchange exports**
- Download trade history from exchanges
- Combine with wallet tracking
- Manual reconciliation needed

### Best Practices

- **Track in real-time:** Don't wait until tax season
- **Keep wallet records:** Which wallet is which
- **Save receipts:** Screenshots of trades
- **Note cost basis:** What you paid matters
- **Track across all platforms:** CEX, DEX, multiple wallets

## Understanding Crypto Taxes (US)

*Disclaimer: This is educational, not tax advice. Consult a tax professional.*

### Taxable Events

**Taxable (you owe):**
- Selling crypto for fiat
- Trading crypto to crypto
- Spending crypto
- Receiving income/rewards in crypto

**Not taxable:**
- Buying crypto with fiat
- Transferring between your own wallets
- Holding

### Short-Term vs Long-Term

**Short-term (held < 1 year):**
- Taxed as ordinary income
- Could be 10-37% depending on bracket
- Higher tax rate

**Long-term (held > 1 year):**
- Taxed at capital gains rates
- 0%, 15%, or 20% depending on income
- Lower tax rate

**Implication:** Holding over 1 year saves significant taxes.

### Cost Basis Methods

**FIFO (First In, First Out):**
- Oldest tokens sold first
- Usually results in lower cost basis
- Common default method

**LIFO (Last In, First Out):**
- Newest tokens sold first
- Usually results in higher cost basis
- Can reduce taxes in some cases

**Specific ID:**
- Choose which tokens to sell
- Most tax-efficient
- Requires good records

**Consult a tax professional** to determine best method for your situation.

## Tax-Efficient Strategies

### Strategy 1: Tax-Loss Harvesting

**What it is:** Selling losers to offset gains.

**Example:**
- You have $10,000 in realized gains
- You also have $4,000 in unrealized losses
- Sell the losers to realize $4,000 loss
- Net taxable gain: $6,000

**Rules:**
- Wash sale rules may apply (consult professional)
- Can only offset capital gains (mostly)
- Carry forward excess losses

### Strategy 2: Hold for Long-Term

**When possible:**
- Hold positions over 1 year
- Long-term rates significantly lower
- Plan exits around holding periods

### Strategy 3: Set Aside for Taxes

**Rule of thumb:**
- Set aside 25-35% of realized gains
- Keep in separate stablecoin allocation
- Don't spend your tax money

### Strategy 4: Maximize Deductions

**Deductible expenses may include:**
- Trading fees
- Software subscriptions
- Education (courses, books)
- Hardware/equipment
- Consult professional for what applies

## Record Keeping for Trading Journal Integration

Your trading journal should support tax needs:

**Each trade entry:**
\`\`\`
Date: ____
Asset: ____
Action: Buy / Sell
Quantity: ____
Price: $____
Fees: $____
Wallet/Exchange: ____
Notes: ____

For sells:
Cost basis: $____
Holding period: ____
Gain/Loss: $____
\`\`\`

## Annual Tax Checklist

**Throughout year:**
- [ ] Track all trades in real-time
- [ ] Set aside tax reserves from gains
- [ ] Harvest losses when appropriate
- [ ] Note holding periods

**Before tax season:**
- [ ] Export all exchange records
- [ ] Reconcile wallet transactions
- [ ] Calculate total gains/losses
- [ ] Organize by short/long term
- [ ] Consult tax professional

**This is not an area to wing it.** The IRS is increasingly focused on crypto. Keep clean records.`
    },
    {
      id: 'continuous-improvement',
      slug: 'continuous-improvement',
      title: 'Continuous Improvement',
      description: 'Never stop evolving as a trader',
      difficulty: 'expert',
      readTime: 8,
      content: `# Continuous Improvement

Markets change. Strategies decay. What worked yesterday might not work tomorrow. The traders who survive long-term are those who continuously improve. This is how to build a practice of constant evolution.

## The Improvement Mindset

**Fixed mindset:** "I've figured it out. Now I execute."
**Growth mindset:** "I'm always learning. Every trade teaches me something."

Markets reward the growth mindset. Complacency gets punished.

## The Feedback Loop

Improvement requires feedback:

\`\`\`
Action â†’ Result â†’ Analysis â†’ Adjustment â†’ Action
\`\`\`

**Without analysis and adjustment:** You repeat the same mistakes forever.

## Structured Review Process

### Daily Review (5 minutes)

**End of each trading day:**
- What trades did I take?
- Did I follow my process?
- Any notable observations?
- Quick P&L update

**Format:**
\`\`\`
Date: ____
Trades taken: ____
Process followed: Y / N
Key observation: ____
P&L: ____
\`\`\`

### Weekly Review (30 minutes)

**End of each week:**
- Total P&L for week
- Win rate
- Average R per trade
- Process adherence rate
- Best trade and why
- Worst trade and why
- Patterns noticed
- Adjustments to consider

**Questions to ask:**
- What worked well this week?
- What didn't work?
- What will I do differently next week?
- Is my system still valid?

### Monthly Review (1-2 hours)

**End of each month:**
- Comprehensive performance metrics
- System effectiveness analysis
- Edge validation
- Goal progress check
- Strategic adjustments

**Deeper questions:**
- Is my edge still working?
- How do my results compare to previous months?
- What market conditions favored/hurt me?
- What skills do I need to develop?
- Any major changes needed to system?

### Quarterly Review (Half day)

**Every 3 months:**
- Big picture assessment
- Portfolio allocation review
- Long-term goal alignment
- System overhaul if needed
- Education and skill development planning

## What to Analyze

### Performance Metrics

**Track over time:**
- Win rate
- Average winner (R)
- Average loser (R)
- Expectancy per trade
- Profit factor
- Maximum drawdown
- Sharpe ratio (if sophisticated)

**Look for:**
- Trends (improving or declining?)
- Anomalies (unusually good/bad periods)
- Patterns (certain setups better than others?)

### Process Metrics

**Track:**
- System adherence rate
- Rule violations
- Emotional state ratings
- Trade quality scores

**Look for:**
- Correlation between process and results
- When do you break rules?
- What triggers poor decisions?

### Contextual Factors

**Track:**
- Market conditions during trades
- Time of day/week
- Position sizes
- Asset types

**Look for:**
- Which conditions favor you?
- Which conditions hurt you?
- Optimal trading times for your style

## Building Your Edge Library

Document what works:

### Setup Documentation

For each setup you trade:
\`\`\`
SETUP: [Name]

Description: ____
Win rate: ____%
Average R: ____
Best conditions: ____
Worst conditions: ____
Key rules: ____
Common mistakes: ____
Examples: ____
\`\`\`

### Edge Decay Monitoring

Edges don't last forever. Monitor:
- Performance by setup over time
- Declining win rates or R
- Changed market conditions
- Increased competition

When edge decays:
- Adapt or retire the setup
- Develop new edges
- Don't force what's not working

## Learning and Development

### Ongoing Education

**Sources:**
- Books on trading psychology
- Market-specific content
- Successful traders' content (verified track records)
- Your own trade reviews (best teacher)

**Avoid:**
- Random Twitter tips
- "Guaranteed profit" content
- Unverified gurus
- Information overload

### Skill Development Plan

Identify skills to develop:
- Technical analysis
- Narrative reading
- On-chain analysis
- Risk management
- Emotional control
- Execution speed

**Pick one at a time:**
- Focus for 1-3 months
- Deliberate practice
- Track improvement
- Move to next skill

## The Trader's Evolution

**Stage 1: Unconscious incompetence**
- Don't know what you don't know
- Think trading is easy
- Lose money without understanding why

**Stage 2: Conscious incompetence**
- Know you have much to learn
- Understand your mistakes
- Still losing but learning

**Stage 3: Conscious competence**
- Know what to do
- Requires effort and focus to execute
- Starting to be profitable

**Stage 4: Unconscious competence**
- Good decisions feel natural
- Process is automatic
- Consistent profitability

**Stage 5: Mastery**
- Adapt to changing conditions
- Teach others
- Continuous refinement

**Where are you? Where do you want to be?**

## The Improvement Commitment

**Commit to:**
- Daily journaling (even brief)
- Weekly reviews (non-negotiable)
- Monthly deep dives
- Quarterly strategic assessment
- Continuous learning
- Honest self-assessment

**This is what separates:**
- Traders who survive and thrive
- From traders who blow up and quit

The market is the ultimate teacher. Pay attention to what it's teaching you.`
    }
  ]
}

export default masterModule
